MYD-J335X

Introduction
==============
To be able to use MYD-J335X board of MYIR with the images generated by
Buildroot, you have to prepare the SDCard.

How to build it
===============

  $ make myd_j335x_defconfig

Then you can edit the build options using

  $ make menuconfig

Compile all and build rootfs image:

  $ make

Result of the build
-------------------

After building, you should get a tree like this:

  output/images/
  ├── MLO
  ├── u-boot.img
  ├── u-boot-spl.bin
  ├── uEnv.txt
  ├── uEnv_mmc.txt
  ├── uEnv_ramdisk.txt
  ├── myd_j335x.dtb
  ├── zImage
  ├── rootfs.cpio
  ├── rootfs.cpio.gz
  ├── rootfs.cpio.uboot
  ├── rootfs.ext2
  ├── rootfs.ext4
  ├── rootfs.tar
  ├── rootfs.tar.gz
  ├── rootfs.ubi
  ├── rootfs.ubifs
  ├── sdcard.img
  └── zImage

How to use it
===============
1. Boot from TF/SD card with ramdisk
  - Format TF/SD with fat/fat32 format
  - Copy MLO, u-boot.img, uEnv_ramdisk.txt, zImage, myd_j335x.dtb, ramdisk.gz to TF/SD card.
  - Rename uEnv_ramdisk.txt to uEnv.txt
  - Insert the TF/SD card to slot, and set bootmode to mmc0
  - Powreoff and poweron to boot from TF/SD card with ramdisk
   
2. Boot from TF/SD card with EXT4 partition on TF/SD card
  - Program sdcard.img to TF/SD card with Win32DiskImager.exe on windows pc.
  - Powreoff and poweron to boot from TF/SD card with ext4 partition on TF/SD card.

3. Boot from Ethernet with NFS
  - Enter U-boot console by press 'space' when u-boot booting from TF/SD card.
  - setenv serverip 192.168.1.2 ( nfs server and tftp server hosted on 192.168.1.2)
  - setenv ipaddr 192.168.1.100 ( set the ipaddr of myd_j335x board)
  - setenv rootpath /home/sunny/export/rootfs ( exported nfs directory with /etc/exports file on nfs server)
  - run netboot

4. Boot from Ethernet with ramdisk
  - Enter U-boot console by press 'space' when u-boot booting from TF/SD card.
  - setenv serverip 192.168.1.2 ( nfs server and tftp server hosted on 192.168.1.2)
  - setenv ipaddr 192.168.1.100 ( set the ipaddr of myd_j335x board)
  - setenv bootargs console=ttyO0,115200n8 root=/dev/ram0 rw rootfstype=ext2 ip=none earlyprintk
  - tftpboot ${loadaddr} zImage  ( zImage was copied to tftp server root directory)
  - tftpboot ${rdaddr} ramdisk.gz ( ramdisk.gz was copied to tftp server root directory)
  - tftpboot ${fdtaddr} myd_j335x.dtb  ( myd_j335x.dtb was copied to tftp server root directory)
  - bootz  ${loadaddr} ${rdaddr} ${fdtaddr}

5. Boot from Nand
  - Copy MLO, u-boot.img, uEnv_ramdisk.txt, zImage, myd_j335x.dtb, ramdisk.gz, rootfs.ubi to TF/SD card.
  - Insert the TF/SD card to slot, and set bootmode to mmc0
  - PowerOff and PowerOn to boot from TF/SD card, press 'space' to interrupt u-boot and enter the u-boot console
  - Execute 'run updatesys' in u-boot console to write MLO, u-boot.img, zImage, myd_j335x.dtb, rootfs.ubi to nand
  - Set bootmode to nand and poweron

Links
===============
1. https://sourceforge.net/projects/win32diskimager/
2. https://buildroot.org/
